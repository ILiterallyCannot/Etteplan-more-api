<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>VR API</title>
    <meta name="description" content="VR API">
    <meta name="author" content="Corey Johnson">

    <link rel="stylesheet" href="css/styles.css?v=1.0">

</head>

<body>
    <div id="root">
        <form id="form" autocomplete="off" action="">
            <input id="stationList" list="station-list" name="stations">
            <datalist id="station-list"></datalist>
            <input type="button" id="button-1" onclick="useValue()"value="submit">
        </form>
        <table>
                <tr>
                        <th>Train</th>
                        <th>Departure Station</th>
                        <th>Arrival Station</th>
                        <th>Time</th>
                </tr>
        </table>

    </div>

    </div>
    <script>
        
        var request = new XMLHttpRequest();
        var dataList = document.getElementById('station-list');
        function useValue() {
            var e = document.getElementById('stationList');
            e.options[e.options.selectedIndex].selected = true;
            alert(getId); 
            e.value = '';
        };
        
        request.open('GET', 'https://rata.digitraffic.fi/api/v1/metadata/stations', true);
        request.onload = function() {
            var data = JSON.parse(this.response)
            var input = document.getElementById('stationList')
            
            if (request.status >= 200 && request.status < 400) {
                data.forEach(station => {
                    const listItem = document.createElement('option')
                    const shortCode = station.stationShortCode
                    listItem.textContent = station.stationName
                    listItem.setAttribute('id', shortCode)
                    dataList.appendChild(listItem)
                    
                });
                input.placeholder = "e.g. Helsinki";
            } else {
                // An error occured :(
                input.placeholder = "Data unavailable.";
            }
            
        }

        request.send();

    </script>
</body>

</html>